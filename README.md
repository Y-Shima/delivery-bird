# メイメイの配達ゲーム 🐦

世界中を飛び回って配達をするリアルタイム地図ゲームです。制限時間内にできるだけ多くの配達を完了してハイスコアを目指しましょう！

## 🎮 ゲーム概要

- **ジャンル**: リアルタイム配達シミュレーション
- **プレイ時間**: 3分間
- **操作**: キーボード操作
- **目標**: 制限時間内に世界各地で配達を完了してスコアを稼ぐ
- **都市数**: 139箇所の世界主要都市
- **ゲームモード**: 
  - **ビギナーモード**: 配達先リストに国名表示、敵の数は通常
  - **ノーマルモード**: 配達先リストに国名非表示、到着時のみ国名表示、敵の数は2倍

## 🕹️ 操作方法

### 基本操作
- **←→キー**: メイメイの向きを変更
- **↑↓キー**: スピード調整（5段階）
- **スペースキー**: 各種決定・選択

### ゲーム中の操作
- **目的地選択**: ↑↓で選択、スペース/Enterで決定
- **寄り道選択**: ↑↓で選択、スペース/Enterで決定、Escapeで断る

### テスト用キー（開発・デバッグ用）
- **Gキー**: ゲーム終了テスト（ランク外）
- **Hキー**: ゲーム終了テスト（ランクイン）
- **Eキー**: 敵衝突テスト（足止め状態）

## 🎯 ゲームシステム

### 配達システム
- **目的地選択**: 最大3つまでの配達先を同時に管理
- **寄り道配達**: 移動中に追加の配達依頼が発生
- **スコア獲得**: 配達完了時に距離と難易度に応じたスコア
- **到着判定**: 目的地から100km以内で配達完了

### 状態システム
- **通常状態**: 🐦 通常の移動と配達
- **パワーアップ**: ⚡🐦 移動速度2倍（10秒間）
- **足止め状態**: 😵 敵との衝突で5秒間停止
- **無敵状態**: ✨ 足止め後5秒間、敵との衝突無効（点滅表示）

### パワーアップシステム
- **配置数**: 30個のパワーアップアイテムが世界中にランダム配置
- **配置条件**: 全ての都市から500km以上離れた場所に配置
- **収集条件**: プレイヤーが100km以内に近づくと自動収集
- **効果**: 10秒間移動速度が2倍になる
- **表示**: ⚡マークで地図上に表示、収集時にメッセージ表示

### 敵キャラクターシステム
- **出現数**: 基本4体（ビギナーモード）、8体（ノーマルモード）
- **出現距離**: プレイヤーから1500km離れた場所に出現
- **衝突判定**: 50km以内で衝突、5秒間の足止め状態
- **移動特性**: 急回転を防ぐ自然な動き、最大回転速度90度/秒
- **敵の性格**:
  - **🐦🔴（赤い敵）**: **追跡型** - 常にプレイヤーに向かって直進する積極的な敵（スピードレベル3）
  - **🐦🟡（黄色い敵）**: **ランダム型** - 不規則に方向転換する予測困難な敵（スピードレベル2）
  - **🐦🔵（青い敵）**: **先回り型** - プレイヤーの進行方向を予測して先回りする知能的な敵（スピードレベル2）

### ランキングシステム
- **HIGH-SCORE保存**: ローカルストレージにビギナーモードとノーマルモードそれぞれの最高スコアを保存
- **モード別管理**: ビギナーモードとノーマルモードで別々にスコアを管理
- **シンプル表示**: ゲーム中に現在のスコアと選択中モードのHIGH-SCOREを表示

## 📁 ファイル構成

```
delivery-bird/
├── index.html              # メインHTMLファイル
├── README.md               # このファイル
├── LICENSE                 # ライセンス情報
├── AmazonQ.md             # 開発用指示書
├── css/                   # スタイルシート
│   ├── base.css           # 基本スタイル
│   ├── game.css           # ゲーム画面スタイル
│   └── modals.css         # モーダル・UI要素スタイル
├── js/                    # JavaScript
│   ├── main.js            # エントリーポイント
│   ├── core/              # コアシステム
│   │   ├── config.js      # ゲーム設定
│   │   ├── gameState.js   # ゲーム状態管理
│   │   └── worldCities.js # 世界都市データ（139箇所）
│   ├── game/              # ゲームロジック
│   │   ├── deliveryBirdGame.js  # メインゲームクラス
│   │   ├── gameControls.js      # 入力制御・描画
│   │   └── gameLogic.js         # ゲームロジック
│   └── ui/                # UI管理
│       ├── uiManager.js   # UI更新・表示制御
│       └── titleScreen.js # タイトル画面管理
├── locales/               # 多言語ファイル
│   ├── ja.js             # 日本語
│   ├── en.js             # 英語
│   └── zh.js             # 簡体字中国語
├── images/               # 画像ファイル（未使用）
└── audio/                # 音声ファイル（未使用）
```

## 🔧 主要ファイルの説明

### HTMLファイル
- **index.html**: ゲームのメインページ。全てのUI要素とゲーム画面を含む

### CSSファイル
- **base.css**: 基本的なスタイル、フォント、レイアウト
- **game.css**: ゲーム画面、プレイヤー状態、アニメーション、パワーアップマーカー
- **modals.css**: モーダルダイアログ、ボタン、フォーム要素

### JavaScript - Core
- **config.js**: ゲーム設定（時間、速度、無敵時間、パワーアップ設定など）
- **gameState.js**: ゲーム状態の管理（スコア、プレイヤー、敵、パワーアップ）
- **i18n.js**: 多言語対応システム
- **worldCities.js**: 世界の都市データと座標（139箇所）

### JavaScript - Game
- **deliveryBirdGame.js**: メインゲームクラス、ゲームループ、イベント処理、マーカー管理
- **gameControls.js**: キーボード入力の処理、Canvas描画（敵・パワーアップ）
- **gameLogic.js**: ゲームロジック（移動、衝突、配達判定、パワーアップ生成）

### JavaScript - UI
- **uiManager.js**: UI要素の更新と表示制御、パワーアップメッセージ表示

## 🚀 開発・カスタマイズ

### 設定変更
`js/core/config.js`でゲーム設定を変更できます：
```javascript
const GAME_CONFIG = {
    GAME_TIME: 180,           // ゲーム時間（秒）
    STUN_DURATION: 5,         // 足止め時間（秒）
    INVINCIBLE_DURATION: 5,   // 無敵時間（秒）
    POWERUP_DURATION: 10,     // パワーアップ時間（秒）
    POWERUP_COUNT: 30,        // パワーアップアイテム数
    POWERUP_MIN_DISTANCE_FROM_CITY: 500, // 都市からの最小距離（km）
    ENEMY_COUNT: 2,           // 基本敵数
    ENEMY_SPAWN_DISTANCE: 1500, // 敵出現距離（km）
    // その他の設定...
};
```

### 新機能追加
1. **新しい状態**: `gameState.js`にプレイヤー状態を追加
2. **新しいUI**: `uiManager.js`に表示ロジックを追加
3. **新しいロジック**: `gameLogic.js`にゲームルールを追加
4. **新しい敵タイプ**: `gameLogic.js`の敵AI部分を拡張

### デバッグ
- ブラウザの開発者ツールでコンソールログを確認
- テスト用キー（G, H, E）でゲーム状態をテスト

## 🌐 技術仕様

### 使用技術
- **HTML5**: ゲーム画面とUI
- **CSS3**: スタイリングとアニメーション
- **JavaScript (ES6+)**: ゲームロジック
- **Leaflet.js**: インタラクティブ地図表示
- **Canvas API**: 敵キャラクターとパワーアップの描画
- **LocalStorage**: ランキングデータ保存
- **多言語対応**: 日本語、英語、簡体字中国語

### ブラウザ対応
- Chrome, Firefox, Safari, Edge（モダンブラウザ）
- JavaScript有効化が必要
- インターネット接続が必要（地図タイル取得）
- 多言語対応（ブラウザの言語設定を自動検出）

## 📝 開発履歴

### 主要な実装・修正
1. **モード別スコア管理**: ビギナーモードとノーマルモードでそれぞれ別々にスコアを保存・管理
2. **ランキングシステム簡素化**: 名前入力とランキング表示を削除、HIGH-SCOREのみ保存
3. **ゲームオーバー画面統合**: 名前入力とゲームオーバー画面を一体化
4. **キー入力修正**: ゲームオーバー画面でのキー操作問題を解決
5. **「もう一度プレイ」修正**: タイトル画面に戻る問題を修正
6. **マウスホバー無効化**: 目的地選択でのマウスホバー効果を削除
7. **無敵システム実装**: 足止め後5秒間の無敵状態と点滅表示
8. **世界都市拡張**: 20箇所から139箇所に大幅拡張
9. **パワーアップシステム実装**: 30個のパワーアップアイテムをランダム配置
10. **敵キャラクター強化**: 3種類の異なる性格を持つ敵AI実装

### 今後の拡張可能性
- 音声効果の追加
- アニメーション効果の強化
- 新しいパワーアップアイテムの種類
- 新しい敵キャラクターの追加
- マルチプレイヤー機能
- モバイル対応

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は`LICENSE`ファイルを参照してください。

---

**楽しい配達の旅を！** 🐦✈️🌍⚡

## 🚀 開発・カスタマイズ

### 設定変更
`js/core/config.js`でゲーム設定を変更できます：
```javascript
const GAME_CONFIG = {
    GAME_TIME: 180,           // ゲーム時間（秒）
    STUN_DURATION: 5,         // 足止め時間（秒）
    INVINCIBLE_DURATION: 5,   // 無敵時間（秒）
    POWERUP_DURATION: 10,     // パワーアップ時間（秒）
    // その他の設定...
};
```

### 新機能追加
1. **新しい状態**: `gameState.js`にプレイヤー状態を追加
2. **新しいUI**: `uiManager.js`に表示ロジックを追加
3. **新しいロジック**: `gameLogic.js`にゲームルールを追加

### デバッグ
- ブラウザの開発者ツールでコンソールログを確認
- テスト用キー（G, H, E, R）でゲーム状態をテスト

## 🌐 技術仕様

### 使用技術
- **HTML5**: ゲーム画面とUI
- **CSS3**: スタイリングとアニメーション
- **JavaScript (ES6+)**: ゲームロジック
- **Leaflet.js**: インタラクティブ地図表示
- **LocalStorage**: ランキングデータ保存
- **多言語対応**: 日本語、英語、簡体字中国語

### ブラウザ対応
- Chrome, Firefox, Safari, Edge（モダンブラウザ）
- JavaScript有効化が必要
- インターネット接続が必要（地図タイル取得）
- 多言語対応（ブラウザの言語設定を自動検出）

## 📝 開発履歴

### 主要な実装・修正
1. **ランキングシステム簡素化**: 名前入力とランキング表示を削除、HIGH-SCOREのみ保存
2. **ゲームオーバー画面統合**: 名前入力とゲームオーバー画面を一体化
3. **キー入力修正**: ゲームオーバー画面でのキー操作問題を解決
4. **「もう一度プレイ」修正**: タイトル画面に戻る問題を修正
5. **マウスホバー無効化**: 目的地選択でのマウスホバー効果を削除
6. **無敵システム実装**: 足止め後5秒間の無敵状態と点滅表示

### 今後の拡張可能性
- 音声効果の追加
- アニメーション効果の強化
- 新しいパワーアップアイテム
- マルチプレイヤー機能
- モバイル対応

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は`LICENSE`ファイルを参照してください。

---

**楽しい配達の旅を！** 🐦✈️🌍
