# メイメイの配達ゲーム 🐦

世界中を飛び回って配達をするリアルタイム地図ゲームです。制限時間内にできるだけ多くの配達を完了してハイスコアを目指しましょう！

## 🎮 ゲーム概要

- **ジャンル**: リアルタイム配達シミュレーション
- **プレイ時間**: 3分間
- **操作**: キーボード操作
- **目標**: 制限時間内に世界各地で配達を完了してスコアを稼ぐ

## 🕹️ 操作方法

### 基本操作
- **←→キー**: メイメイの向きを変更
- **↑↓キー**: スピード調整（5段階）
- **スペースキー**: 各種決定・選択

### ゲーム中の操作
- **目的地選択**: ↑↓で選択、スペース/Enterで決定
- **寄り道選択**: ↑↓で選択、スペース/Enterで決定、Escapeで断る

### テスト用キー（開発・デバッグ用）
- **Gキー**: ゲーム終了テスト（ランク外）
- **Hキー**: ゲーム終了テスト（ランクイン）
- **Eキー**: 敵衝突テスト（足止め状態）
- **Rキー**: ランキングリセット

## 🎯 ゲームシステム

### 配達システム
- **目的地選択**: 最大3つまでの配達先を同時に管理
- **寄り道配達**: 移動中に追加の配達依頼が発生
- **スコア獲得**: 配達完了時に距離と難易度に応じたスコア

### 状態システム
- **通常状態**: 🐦 通常の移動と配達
- **パワーアップ**: ⚡🐦 移動速度2倍（10秒間）
- **足止め状態**: 😵 敵との衝突で5秒間停止
- **無敵状態**: ✨ 足止め後5秒間、敵との衝突無効（点滅表示）

### ランキングシステム
- **ハイスコア保存**: ローカルストレージに上位10位まで保存
- **名前入力**: ランクイン時の3文字名前入力
- **統合画面**: ゲームオーバーと名前入力が一体化

## 📁 ファイル構成

```
delivery-bird/
├── index.html              # メインHTMLファイル
├── README.md               # このファイル
├── LICENSE                 # ライセンス情報
├── AmazonQ.md             # 開発用指示書
├── css/                   # スタイルシート
│   ├── base.css           # 基本スタイル
│   ├── game.css           # ゲーム画面スタイル
│   └── modals.css         # モーダル・UI要素スタイル
├── js/                    # JavaScript
│   ├── main.js            # エントリーポイント
│   ├── core/              # コアシステム
│   │   ├── config.js      # ゲーム設定
│   │   ├── gameState.js   # ゲーム状態管理
│   │   ├── i18n.js        # 多言語対応
│   │   └── worldCities.js # 世界都市データ
│   ├── game/              # ゲームロジック
│   │   ├── deliveryBirdGame.js  # メインゲームクラス
│   │   ├── gameControls.js      # 入力制御
│   │   ├── gameLogic.js         # ゲームロジック
│   │   └── nameEntry.js         # 名前入力システム
│   └── ui/                # UI管理
│       ├── uiManager.js   # UI更新・表示制御
│       └── mapManager.js  # 地図表示管理
├── locales/               # 多言語ファイル
│   ├── ja.js             # 日本語
│   ├── en.js             # 英語
│   └── zh.js             # 簡体字中国語
├── images/               # 画像ファイル（未使用）
└── audio/                # 音声ファイル（未使用）
```

## 🔧 主要ファイルの説明

### HTMLファイル
- **index.html**: ゲームのメインページ。全てのUI要素とゲーム画面を含む

### CSSファイル
- **base.css**: 基本的なスタイル、フォント、レイアウト
- **game.css**: ゲーム画面、プレイヤー状態、アニメーション
- **modals.css**: モーダルダイアログ、ボタン、フォーム要素

### JavaScript - Core
- **config.js**: ゲーム設定（時間、速度、無敵時間など）
- **gameState.js**: ゲーム状態の管理（スコア、プレイヤー、敵、パワーアップ）
- **i18n.js**: 多言語対応システム
- **worldCities.js**: 世界の都市データと座標

### JavaScript - Game
- **deliveryBirdGame.js**: メインゲームクラス、ゲームループ、イベント処理
- **gameControls.js**: キーボード入力の処理
- **gameLogic.js**: ゲームロジック（移動、衝突、配達判定）
- **nameEntry.js**: ランクイン時の名前入力システム

### JavaScript - UI
- **uiManager.js**: UI要素の更新と表示制御
- **mapManager.js**: Leaflet地図の管理と表示

## 🚀 開発・カスタマイズ

### 設定変更
`js/core/config.js`でゲーム設定を変更できます：
```javascript
const GAME_CONFIG = {
    GAME_TIME: 180,           // ゲーム時間（秒）
    STUN_DURATION: 5,         // 足止め時間（秒）
    INVINCIBLE_DURATION: 5,   // 無敵時間（秒）
    POWERUP_DURATION: 10,     // パワーアップ時間（秒）
    // その他の設定...
};
```

### 新機能追加
1. **新しい状態**: `gameState.js`にプレイヤー状態を追加
2. **新しいUI**: `uiManager.js`に表示ロジックを追加
3. **新しいロジック**: `gameLogic.js`にゲームルールを追加

### デバッグ
- ブラウザの開発者ツールでコンソールログを確認
- テスト用キー（G, H, E, R）でゲーム状態をテスト

## 🌐 技術仕様

### 使用技術
- **HTML5**: ゲーム画面とUI
- **CSS3**: スタイリングとアニメーション
- **JavaScript (ES6+)**: ゲームロジック
- **Leaflet.js**: インタラクティブ地図表示
- **LocalStorage**: ランキングデータ保存
- **多言語対応**: 日本語、英語、簡体字中国語

### ブラウザ対応
- Chrome, Firefox, Safari, Edge（モダンブラウザ）
- JavaScript有効化が必要
- インターネット接続が必要（地図タイル取得）
- 多言語対応（ブラウザの言語設定を自動検出）

## 📝 開発履歴

### 主要な実装・修正
1. **ゲームオーバー画面統合**: 名前入力とゲームオーバー画面を一体化
2. **キー入力修正**: ゲームオーバー画面でのキー操作問題を解決
3. **「もう一度プレイ」修正**: タイトル画面に戻る問題を修正
4. **マウスホバー無効化**: 目的地選択でのマウスホバー効果を削除
5. **無敵システム実装**: 足止め後5秒間の無敵状態と点滅表示

### 今後の拡張可能性
- 音声効果の追加
- アニメーション効果の強化
- 新しいパワーアップアイテム
- マルチプレイヤー機能
- モバイル対応

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は`LICENSE`ファイルを参照してください。

---

**楽しい配達の旅を！** 🐦✈️🌍
