/* スプライトアニメーション用CSS */

/* メイメイのスプライト表示 - 64x64サイズ */
#meimei-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 64px;
    height: 64px;
    z-index: 10;
    pointer-events: none;
    transition: transform 0.1s ease;
    filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
    background-image: url('../images/sprites/meimei.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

/* 飛行アニメーション */
#meimei-center.flying {
    animation: fly-animation 0.6s infinite;
}

@keyframes fly-animation {
    0% {
        background-image: url('../images/sprites/meimei-fly1.png');
    }
    50% {
        background-image: url('../images/sprites/meimei-fly2.png');
    }
    100% {
        background-image: url('../images/sprites/meimei-fly1.png');
    }
}

/* パワーアップ状態 */
#meimei-center.powered-up {
    background-image: url('../images/sprites/meimei-powerup.png');
    animation: powerup-glow 0.5s infinite alternate, fly-animation 0.4s infinite;
}

@keyframes powerup-glow {
    from { 
        filter: drop-shadow(0 0 10px #FFD700) drop-shadow(2px 2px 4px rgba(0,0,0,0.5)); 
    }
    to { 
        filter: drop-shadow(0 0 20px #FF4500) drop-shadow(2px 2px 4px rgba(0,0,0,0.5)); 
    }
}

/* 気絶状態 */
#meimei-center.stunned {
    background-image: url('../images/sprites/meimei-stunned.png');
    animation: stunned-shake 0.2s infinite;
}

@keyframes stunned-shake {
    0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
    25% { transform: translate(-50%, -50%) rotate(-2deg); }
    75% { transform: translate(-50%, -50%) rotate(2deg); }
}

/* 無敵状態（点滅） */
#meimei-center.invincible {
    animation: blink 0.5s infinite;
}

@keyframes blink {
    0%, 50% {
        opacity: 1;
    }
    51%, 100% {
        opacity: 0.3;
    }
}

/* 無敵状態 + 飛行アニメーション */
#meimei-center.invincible.flying {
    animation: blink 0.5s infinite, fly-animation 0.6s infinite;
}

/* 方向転換アニメーション - 上向き基準 */
#meimei-center.turning-up {
    transform: translate(-50%, -50%) rotate(0deg);
}

#meimei-center.turning-right {
    transform: translate(-50%, -50%) rotate(90deg);
}

#meimei-center.turning-down {
    transform: translate(-50%, -50%) rotate(180deg);
}

#meimei-center.turning-left {
    transform: translate(-50%, -50%) rotate(-90deg);
}

/* 敵キャラクター用のスプライトクラス - 64x64サイズ */
.enemy-sprite {
    width: 64px;
    height: 64px;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    position: absolute;
    z-index: 15;
    filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.5));
    transition: transform 0.1s ease;
    pointer-events: none;
}

/* 敵の種類別スプライト */
.enemy-sprite.enemy-type-0 {
    background-image: url('../images/sprites/enemy-red.png');
}

.enemy-sprite.enemy-type-1 {
    background-image: url('../images/sprites/enemy-yellow.png');
}

.enemy-sprite.enemy-type-2 {
    background-image: url('../images/sprites/enemy-blue.png');
}

/* 敵の飛行アニメーション - 種類別 */
.enemy-sprite.enemy-type-0.flying {
    animation: enemy-fly-red 0.8s infinite;
}

.enemy-sprite.enemy-type-1.flying {
    animation: enemy-fly-yellow 0.8s infinite;
}

.enemy-sprite.enemy-type-2.flying {
    animation: enemy-fly-blue 0.8s infinite;
}

@keyframes enemy-fly-red {
    0%, 100% {
        background-image: url('../images/sprites/enemy-red.png');
        transform: translateY(0px);
    }
    50% {
        background-image: url('../images/sprites/enemy-red.png');
        transform: translateY(-3px);
    }
}

@keyframes enemy-fly-yellow {
    0%, 100% {
        background-image: url('../images/sprites/enemy-yellow.png');
        transform: translateY(0px);
    }
    50% {
        background-image: url('../images/sprites/enemy-yellow.png');
        transform: translateY(-3px);
    }
}

@keyframes enemy-fly-blue {
    0%, 100% {
        background-image: url('../images/sprites/enemy-blue.png');
        transform: translateY(0px);
    }
    50% {
        background-image: url('../images/sprites/enemy-blue.png');
        transform: translateY(-3px);
    }
}

/* 敵の方向転換 */
.enemy-sprite.facing-left {
    transform: scaleX(-1);
}

.enemy-sprite.facing-right {
    transform: scaleX(1);
}

/* 敵の方向転換 + 飛行アニメーション - 上向き基準 */
/* 敵の方向転換 + 飛行アニメーション */
.enemy-sprite.facing-left.enemy-type-0.flying {
    animation: enemy-fly-red 0.8s infinite;
    transform: scaleX(-1);
}

.enemy-sprite.facing-right.enemy-type-0.flying {
    animation: enemy-fly-red 0.8s infinite;
    transform: scaleX(1);
}

.enemy-sprite.facing-left.enemy-type-1.flying {
    animation: enemy-fly-yellow 0.8s infinite;
    transform: scaleX(-1);
}

.enemy-sprite.facing-right.enemy-type-1.flying {
    animation: enemy-fly-yellow 0.8s infinite;
    transform: scaleX(1);
}

.enemy-sprite.facing-left.enemy-type-2.flying {
    animation: enemy-fly-blue 0.8s infinite;
    transform: scaleX(-1);
}

.enemy-sprite.facing-right.enemy-type-2.flying {
    animation: enemy-fly-blue 0.8s infinite;
    transform: scaleX(1);
}

/* Leafletマーカー用の敵スプライトスタイル */
.leaflet-marker-icon div.facing-left {
    transform: scaleX(-1) !important;
}

.leaflet-marker-icon div.facing-right {
    transform: scaleX(1) !important;
}

/* パワーアップアイテム用スプライト - 64x64に合わせて調整 */
.powerup-sprite {
    width: 32px;
    height: 32px;
    background: radial-gradient(circle, #FFD700, #FFA500);
    border-radius: 50%;
    position: absolute;
    z-index: 5;
    animation: powerup-pulse 1s infinite;
    filter: drop-shadow(0 0 5px #FFD700);
}

@keyframes powerup-pulse {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.8;
    }
}

/* スプライトの滑らかな移動 */
.sprite-smooth {
    transition: all 0.1s ease-out;
}

/* デバッグ用：スプライトの境界を表示 */
.sprite-debug {
    border: 1px solid red;
    background-color: rgba(255, 0, 0, 0.1);
}
